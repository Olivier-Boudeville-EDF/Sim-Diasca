<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module preferences</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module preferences</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Service dedicated to the <b>management of user-defined preferences</b>.


<h2><a name="description">Description</a></h2><p>Service dedicated to the <b>management of user-defined preferences</b>.</p>

 <p>A preferences element is designated by a key (an atom), associated to a value 
(that can be any term). No difference is made between a non-registered key and 
a key registered to 'undefined'.</p>

 <p>This is typically a way of storing durable information in one's user account 
in a transverse way compared to programs and versions thereof, and of sharing 
them conveniently (ex: for passwords, settings).</p>

 <p>Preferences can be stored in file(s), in the ETF format. This format of
 preferences is a series of Erlang terms as strings, each ended with a dot
 (i.e. it is the basic, standard format understood by <code>file:consult/1</code>).</p>

 Example of content of a preferences file:
 <pre> {my_first_color, red}.
 {myheight, 1.80}.
 {myName, "Sylvester the cat"}.</pre>

 Refer to https://myriad.esperide.org/#etf for more information.

<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-entries">entries()</a></h3>
<p><tt>entries() = <a href="table.html#type-entries">table:entries()</a></tt></p>


<h3 class="typedecl"><a name="type-entry">entry()</a></h3>
<p><tt>entry() = <a href="table.html#type-entry">table:entry()</a></tt></p>


<h3 class="typedecl"><a name="type-file_path">file_path()</a></h3>
<p><tt>file_path() = <a href="file_utils.html#type-file_path">file_utils:file_path()</a></tt></p>


<h3 class="typedecl"><a name="type-key">key()</a></h3>
<p><tt>key() = atom()</tt></p>


<h3 class="typedecl"><a name="type-maybe_list">maybe_list()</a></h3>
<p><tt>maybe_list(T) = <a href="list_utils.html#type-maybe_list">list_utils:maybe_list</a>(T)</tt></p>


<h3 class="typedecl"><a name="type-preferences_pid">preferences_pid()</a></h3>
<p><tt>preferences_pid() = pid()</tt></p>
<p> The PID of a preferences server.</p>

<h3 class="typedecl"><a name="type-ustring">ustring()</a></h3>
<p><tt>ustring() = <a href="text_utils.html#type-ustring">text_utils:ustring()</a></tt></p>


<h3 class="typedecl"><a name="type-value">value()</a></h3>
<p><tt>value() = <a href="table.html#type-value">table:value()</a></tt></p>
<p> Can be 'undefined' (no difference between a non-registered key and a key
 registered to 'undefined').</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#check_preferences_default_file-0">check_preferences_default_file/0</a></td><td>Checks that the default preferences file exists, throws an exception
 otherwise.</td></tr>
<tr><td valign="top"><a href="#get-1">get/1</a></td><td>Returns the value associated to each of the specified key(s) in the 
preferences (if any), otherwise 'undefined', based on the default preferences 
file, and possibly launching a corresponding preferences server if needed.</td></tr>
<tr><td valign="top"><a href="#get-2">get/2</a></td><td>Returns the value associated to each of the specified key(s) in the 
preferences (if any), otherwise 'undefined', based on the specified 
preferences file (and possibly launching a corresponding preferences server if 
needed) or on the specified PID of an already-running preferences server.</td></tr>
<tr><td valign="top"><a href="#get_default_preferences_path-0">get_default_preferences_path/0</a></td><td>Returns the full, absolute path to the default preferences filename.</td></tr>
<tr><td valign="top"><a href="#is_preferences_default_file_available-0">is_preferences_default_file_available/0</a></td><td>Returns whether the default preferences file is available and its full
 path.</td></tr>
<tr><td valign="top"><a href="#set-2">set/2</a></td><td>Associates, in default preferences, specified value to specified key
 (possibly overwriting any previous value).</td></tr>
<tr><td valign="top"><a href="#set-3">set/3</a></td><td>Associates, in specified preferences, specified value to specified key
 (possibly overwriting any previous value), based on the specified preferences
 file (and possibly launching a corresponding preferences server if needed) or
 on the specified PID of an already-running preferences server..</td></tr>
<tr><td valign="top"><a href="#start-0">start/0</a></td><td>Ensures that, if not done already, the preferences service is started and 
initialised immediately (based on the default preferences path), if wanting an 
explicit start rather than one implied by the use of an operation onto it.</td></tr>
<tr><td valign="top"><a href="#start-1">start/1</a></td><td>Ensures that, if not done already, the preferences service is started and 
initialised immediately with the specified filename.</td></tr>
<tr><td valign="top"><a href="#start_link-0">start_link/0</a></td><td>Ensures that, if not done already, the preferences service is started and 
linked, and initialised immediately (based on the default preferences path), 
if wanting an explicit start rather than one implied by the use of an 
operation onto it.</td></tr>
<tr><td valign="top"><a href="#start_link-1">start_link/1</a></td><td>Ensures that, if not done already, the preferences service is started and 
linked, and initialised immediately with the specified filename.</td></tr>
<tr><td valign="top"><a href="#stop-0">stop/0</a></td><td>Stops (asynchronously) the preferences server, if it is running.</td></tr>
<tr><td valign="top"><a href="#stop-1">stop/1</a></td><td>Stops (asynchronously) the preferences server designated by specified 
file, if it is running.</td></tr>
<tr><td valign="top"><a href="#to_string-0">to_string/0</a></td><td>Returns a textual description of the preferences server (if any), for
 the default preferences file.</td></tr>
<tr><td valign="top"><a href="#to_string-1">to_string/1</a></td><td>Returns a textual description of the preferences server (if any), for
 specified preferences file.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="check_preferences_default_file-0">check_preferences_default_file/0</a></h3>
<div class="spec">
<p><tt>check_preferences_default_file() -&gt; <a href="#type-void">void()</a></tt><br></p>
<p> </p>
</div><p>Checks that the default preferences file exists, throws an exception
 otherwise.
</p>

<h3 class="function"><a name="get-1">get/1</a></h3>
<div class="spec">
<p><tt>get(KeyMaybes::<a href="#type-maybe_list">maybe_list</a>(<a href="#type-key">key()</a>)) -&gt; <a href="#type-maybe_list">maybe_list</a>(<a href="#type-maybe">maybe</a>(<a href="#type-value">value()</a>))</tt><br></p>
<p> </p>
</div><p><p>Returns the value associated to each of the specified key(s) in the 
preferences (if any), otherwise 'undefined', based on the default preferences 
file, and possibly launching a corresponding preferences server if needed.</p>

 Examples:
  "Hello!" = preferences:get(hello)
  ["Hello!", 42, undefined] = preferences:get([hello, my_number, some_maybe])
</p>

<h3 class="function"><a name="get-2">get/2</a></h3>
<div class="spec">
<p><tt>get(KeyMaybes::<a href="#type-maybe_list">maybe_list</a>(<a href="#type-key">key()</a>), FilePath::<a href="#type-file_path">file_path()</a> | <a href="#type-preferences_pid">preferences_pid()</a>) -&gt; <a href="#type-maybe_list">maybe_list</a>(<a href="#type-maybe">maybe</a>(<a href="#type-value">value()</a>))</tt><br></p>
<p> </p>
</div><p><p>Returns the value associated to each of the specified key(s) in the 
preferences (if any), otherwise 'undefined', based on the specified 
preferences file (and possibly launching a corresponding preferences server if 
needed) or on the specified PID of an already-running preferences server.</p>

 Examples:
  "Hello!" = preferences:get(hello, "/var/foobar.etf")
  ["Hello!", 42, undefined] =
     preferences:get([hello, my_number, some_maybe], "/var/foobar.etf")
  ["Hello!", 42, undefined] =
     preferences:get([hello, my_number, some_maybe], MyPrefServerPid)
</p>

<h3 class="function"><a name="get_default_preferences_path-0">get_default_preferences_path/0</a></h3>
<div class="spec">
<p><tt>get_default_preferences_path() -&gt; <a href="file_utils.html#type-path">file_utils:path()</a></tt><br></p>
<p> </p>
</div><p>Returns the full, absolute path to the default preferences filename.</p>

<h3 class="function"><a name="is_preferences_default_file_available-0">is_preferences_default_file_available/0</a></h3>
<div class="spec">
<p><tt>is_preferences_default_file_available() -&gt; {boolean(), <a href="#type-file_path">file_path()</a>}</tt><br></p>
<p> </p>
</div><p>Returns whether the default preferences file is available and its full
 path.
</p>

<h3 class="function"><a name="set-2">set/2</a></h3>
<div class="spec">
<p><tt>set(Key::<a href="#type-key">key()</a>, Value::<a href="#type-value">value()</a>) -&gt; <a href="#type-void">void()</a></tt><br></p>
<p> </p>
</div><p>Associates, in default preferences, specified value to specified key
 (possibly overwriting any previous value).
</p>

<h3 class="function"><a name="set-3">set/3</a></h3>
<div class="spec">
<p><tt>set(Key::<a href="#type-key">key()</a>, Value::<a href="#type-value">value()</a>, FilePath::<a href="#type-file_path">file_path()</a> | <a href="#type-preferences_pid">preferences_pid()</a>) -&gt; <a href="#type-void">void()</a></tt><br></p>
<p> </p>
</div><p>Associates, in specified preferences, specified value to specified key
 (possibly overwriting any previous value), based on the specified preferences
 file (and possibly launching a corresponding preferences server if needed) or
 on the specified PID of an already-running preferences server..
</p>

<h3 class="function"><a name="start-0">start/0</a></h3>
<div class="spec">
<p><tt>start() -&gt; <a href="#type-preferences_pid">preferences_pid()</a></tt><br></p>
<p> </p>
</div><p><p>Ensures that, if not done already, the preferences service is started and 
initialised immediately (based on the default preferences path), if wanting an 
explicit start rather than one implied by the use of an operation onto it.</p>

 Returns in any case the PID of the corresponding preferences server.
</p>

<h3 class="function"><a name="start-1">start/1</a></h3>
<div class="spec">
<p><tt>start(FilePath::<a href="#type-file_path">file_path()</a>) -&gt; <a href="#type-preferences_pid">preferences_pid()</a></tt><br></p>
<p> </p>
</div><p><p>Ensures that, if not done already, the preferences service is started and 
initialised immediately with the specified filename.</p>

 Returns in any case the PID of the corresponding preferences server.
</p>

<h3 class="function"><a name="start_link-0">start_link/0</a></h3>
<div class="spec">
<p><tt>start_link() -&gt; <a href="#type-preferences_pid">preferences_pid()</a></tt><br></p>
<p> </p>
</div><p><p>Ensures that, if not done already, the preferences service is started and 
linked, and initialised immediately (based on the default preferences path), 
if wanting an explicit start rather than one implied by the use of an 
operation onto it.</p>

 Returns in any case the PID of the corresponding preferences server.
</p>

<h3 class="function"><a name="start_link-1">start_link/1</a></h3>
<div class="spec">
<p><tt>start_link(FilePath::<a href="#type-file_path">file_path()</a>) -&gt; <a href="#type-preferences_pid">preferences_pid()</a></tt><br></p>
<p> </p>
</div><p><p>Ensures that, if not done already, the preferences service is started and 
linked, and initialised immediately with the specified filename.</p>

 Returns in any case the PID of the corresponding preferences server.
</p>

<h3 class="function"><a name="stop-0">stop/0</a></h3>
<div class="spec">
<p><tt>stop() -&gt; <a href="#type-void">void()</a></tt><br></p>
<p> </p>
</div><p><p>Stops (asynchronously) the preferences server, if it is running.</p>

 Never fails.
</p>

<h3 class="function"><a name="stop-1">stop/1</a></h3>
<div class="spec">
<p><tt>stop(FilePath::<a href="#type-file_path">file_path()</a>) -&gt; <a href="#type-void">void()</a></tt><br></p>
<p> </p>
</div><p><p>Stops (asynchronously) the preferences server designated by specified 
file, if it is running.</p>

 Never fails.
</p>

<h3 class="function"><a name="to_string-0">to_string/0</a></h3>
<div class="spec">
<p><tt>to_string() -&gt; <a href="#type-ustring">ustring()</a></tt><br></p>
<p> </p>
</div><p>Returns a textual description of the preferences server (if any), for
 the default preferences file.
</p>

<h3 class="function"><a name="to_string-1">to_string/1</a></h3>
<div class="spec">
<p><tt>to_string(FilePath::<a href="#type-file_path">file_path()</a>) -&gt; <a href="#type-ustring">ustring()</a></tt><br></p>
<p> </p>
</div><p>Returns a textual description of the preferences server (if any), for
 specified preferences file.
</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
